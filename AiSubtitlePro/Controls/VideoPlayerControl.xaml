<UserControl x:Class="AiSubtitlePro.Controls.VideoPlayerControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vlc="clr-namespace:LibVLCSharp.WPF;assembly=LibVLCSharp.WPF"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             Background="Black">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Video Surface -->
        <Grid Grid.Row="0" Background="Black">
            <!-- New Image-based display for LibAss rendering -->
            <Image x:Name="VideoImage" Stretch="Uniform" RenderOptions.BitmapScalingMode="Linear" MouseLeftButtonDown="VideoImage_MouseLeftButtonDown" />

            <!-- Loading/No Media Overlay -->
            <Border x:Name="NoMediaOverlay" Background="#AA000000">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <materialDesign:PackIcon Kind="VideoOff" Width="64" Height="64" 
                                            Foreground="Gray" HorizontalAlignment="Center" />
                    <TextBlock Text="No media loaded" Foreground="Gray" 
                              FontSize="16" Margin="0,12,0,0" HorizontalAlignment="Center" />
                    <TextBlock Text="Use File â†’ Open Media to load a video" Foreground="DarkGray" 
                              FontSize="12" Margin="0,4,0,0" HorizontalAlignment="Center" />
                </StackPanel>
            </Border>
        </Grid>

        <!-- Playback Controls -->
        <Border Grid.Row="1" Background="#F3F4F6" Padding="4">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- Play/Pause/Stop -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <Button x:Name="PlayPauseButton" Click="PlayPause_Click" 
                            Style="{StaticResource ToolButtonStyle}" ToolTip="Play/Pause (Space)">
                        <materialDesign:PackIcon x:Name="PlayPauseIcon" Kind="Play" Width="20" Height="20" />
                    </Button>
                    <Button Click="Stop_Click" Style="{StaticResource ToolButtonStyle}" ToolTip="Stop">
                        <materialDesign:PackIcon Kind="Stop" Width="20" Height="20" />
                    </Button>
                    <Button Click="FrameBack_Click" Style="{StaticResource ToolButtonStyle}" ToolTip="Previous Frame">
                        <materialDesign:PackIcon Kind="SkipPrevious" Width="18" Height="18" />
                    </Button>
                    <Button Click="FrameForward_Click" Style="{StaticResource ToolButtonStyle}" ToolTip="Next Frame">
                        <materialDesign:PackIcon Kind="SkipNext" Width="18" Height="18" />
                    </Button>
                </StackPanel>

                <!-- Timeline Slider -->
                <Slider x:Name="TimelineSlider" Grid.Column="1" 
                       VerticalAlignment="Center" Margin="8,0"
                       Minimum="0" Maximum="100" Value="0"
                       IsMoveToPointEnabled="True"
                       PreviewMouseUp="TimelineSlider_PreviewMouseUp"
                       ValueChanged="TimelineSlider_ValueChanged" />

                <!-- Time Display -->
                <TextBlock x:Name="TimeDisplay" Grid.Column="2" 
                          VerticalAlignment="Center"
                          Foreground="#111111"
                          FontFamily="Consolas"
                          FontSize="12"
                          Margin="6,0"
                          Text="00:00:00.00 / 00:00:00.00" />

                <!-- Volume -->
                <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center">
                    <Button x:Name="MuteButton" Click="Mute_Click" Style="{StaticResource ToolButtonStyle}">
                        <materialDesign:PackIcon x:Name="VolumeIcon" Kind="VolumeHigh" Width="20" Height="20" />
                    </Button>
                    <Slider x:Name="VolumeSlider" Width="80" 
                           Value="100" Minimum="0" Maximum="100"
                           VerticalAlignment="Center"
                           ValueChanged="VolumeSlider_ValueChanged" />
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>
